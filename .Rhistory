#Separando las bases de datos de internautas y NO internautas
NoInter <- bd[bd$Tipo == 2,]
Internautas <- bd[bd$Tipo == 1,]
knitr::opts_chunk$set(echo = TRUE)
# Importando librerias
library(readxl)
library(readr)
library(ggplot2)
library(Amelia)
library(VIM)
library(mice)
library(grid)
library(gridExtra)
bd <- read_delim("bases de datos/base-5536-bdfinalcorregido.csv",
";", escape_double = FALSE, trim_ws = TRUE)
bd$Tipo <- as.factor(bd$Tipo)
bd$P2   <- as.factor(bd$P2)
bd$P4   <- as.factor(bd$P4)
bd$P6   <- as.factor(bd$P6)
bd$P10  <- as.factor(bd$P10)
bd$P12  <- as.factor(bd$P12)
bd$P15A <- as.factor(bd$P15A)
bd$P16  <- as.factor(bd$P16)
bd$P17  <- as.factor(bd$P17)
bd$P20  <- as.factor(bd$P20)
bd$P23  <- as.factor(bd$P23)
bd$P28  <- as.factor(bd$P28)
bd$P31A <- as.factor(bd$P31A)
bd$P32  <- as.factor(bd$P32)
bd$P33  <- as.factor(bd$P33)
bd$P35  <- as.factor(bd$P35)
bd$P36A[bd$P36A==9] <- NA
bd$P36A  <- as.factor(bd$P36A)
bd$P129A[bd$P129A==9] <- NA
bd$P129A <- as.factor(bd$P129A)
bd$P130A[bd$P130A==9] <- NA
bd$P130A <- as.factor(bd$P130A)
bd$P131A[bd$P131A==9] <- NA
bd$P131A <- as.factor(bd$P131A)
bd$P132A[bd$P132A==9] <- NA
bd$P132A <- as.factor(bd$P132A)
bd$P133A[bd$P133A==9] <- NA
bd$P133A <- as.factor(bd$P133A)
bd$P134[bd$P134==9] <- NA
bd$P134  <- as.factor(bd$P134)
bd$P135[bd$P135==9] <- NA
bd$P135  <- as.factor(bd$P135)
bd$P136[bd$P136==9] <- NA
bd$P136  <- as.factor(bd$P136)
bd$P137[bd$P137==9] <- NA
bd$P137  <- as.factor(bd$P137)
bd$P138[bd$P138==9] <- NA
bd$P138  <- as.factor(bd$P138)
bd$P139[bd$P139==9] <- NA
bd$P139  <- as.factor(bd$P139)
bd$P140[bd$P140==9] <- NA
bd$P140  <- as.factor(bd$P140)
bd$P148  <- as.factor(bd$P148)
bd$P149  <- as.factor(bd$P149)
bd$P150  <- as.factor(bd$P150)
bd$P151  <- as.factor(bd$P151)
bd$P152  <- factor(bd$P152,labels = c("AS","CP","NP","PI","EM","ES","AC","RJ","SB","SN"))
bd$P153  <- as.factor(bd$P153)
bd$P154A <- as.factor(bd$P154A)
bd$P155  <- as.factor(bd$P155)
bd$P156A <- as.factor(bd$P156A)
bd$P156B <- as.factor(bd$P156B)
bd$P156C <- as.factor(bd$P156C)
bd$P156D <- as.factor(bd$P156D)
bd$P156E <- as.factor(bd$P156E)
bd$P156F <- as.factor(bd$P156F)
bd$P156G <- as.factor(bd$P156G)
bd$P156H <- as.factor(bd$P156H)
bd$P156I <- as.factor(bd$P156I)
bd$P156J <- as.factor(bd$P156J)
bd$P156K <- as.factor(bd$P156K)
bd$P157  <- as.factor(bd$P157)
bd$P158  <- as.factor(bd$P158)
bd$P159  <- as.factor(bd$P159)
bd$P160  <- as.factor(bd$P160)
bd$CodP160 <- as.factor(bd$CodP160)
bd$Nse <- as.factor(bd$Nse)
bd$P14[bd$P14==9]  <- NA
bd$P30[bd$P30==99] <- NA
bd$P34[bd$P34==99] <- NA
summary(bd)
#Separando las bases de datos de internautas y NO internautas
NoInter <- bd[bd$Tipo == 2,]
Internautas <- bd[bd$Tipo == 1,]
plot(pressure)
summary(bd)
names(bd)
table(bd$P2)
si_no <- c("SI","NO")
names(bd$P2) <- si_no
table(bd$P2)
levels(bd$P2) <- si_no
table(bd$P2)
table(bd$P4)
table(bd$P5)
knitr::opts_chunk$set(echo = TRUE)
# Ampliación de los factores de expansion
expandido <- bd[rep(seq_len(nrow(bd)), bd$Ponderador5536),]
# Importando librerias
library(readxl)
library(readr)
library(ggplot2)
library(Amelia)
library(VIM)
library(mice)
library(grid)
library(gridExtra)
bd <- read_delim("bases de datos/base-5536-bdfinalcorregido.csv",
";", escape_double = FALSE, trim_ws = TRUE)
## definiendo algunas etiquetas comunes para los datos
inter_no <- c("Internauta", "No Internauta")
si_no <- c("SI","NO") # 1 = Si , 2 = No
# Clasificando datos categóricos y datos numéricos
bd$Tipo <- as.factor(bd$Tipo)
levels(bd$Tipo) <- inter_no
bd$P2   <- as.factor(bd$P2)
levels(bd$P2) <- si_no
bd$P4   <- as.factor(bd$P4)
levels(bd$P4)<- si_no
bd$P6   <- as.factor(bd$P6)
levels(bd$P6)<- si_no
bd$P10  <- as.factor(bd$P10)
bd$P12  <- as.factor(bd$P12)
bd$P15A <- as.factor(bd$P15A)
bd$P16  <- as.factor(bd$P16)
bd$P17  <- as.factor(bd$P17)
bd$P20  <- as.factor(bd$P20)
bd$P23  <- as.factor(bd$P23)
bd$P28  <- as.factor(bd$P28)
bd$P31A <- as.factor(bd$P31A)
bd$P32  <- as.factor(bd$P32)
bd$P33  <- as.factor(bd$P33)
bd$P35  <- as.factor(bd$P35)
bd$P36A[bd$P36A==9] <- NA
bd$P36A  <- as.factor(bd$P36A)
bd$P129A[bd$P129A==9] <- NA
bd$P129A <- as.factor(bd$P129A)
bd$P130A[bd$P130A==9] <- NA
bd$P130A <- as.factor(bd$P130A)
bd$P131A[bd$P131A==9] <- NA
bd$P131A <- as.factor(bd$P131A)
bd$P132A[bd$P132A==9] <- NA
bd$P132A <- as.factor(bd$P132A)
bd$P133A[bd$P133A==9] <- NA
bd$P133A <- as.factor(bd$P133A)
bd$P134[bd$P134==9] <- NA
bd$P134  <- as.factor(bd$P134)
bd$P135[bd$P135==9] <- NA
bd$P135  <- as.factor(bd$P135)
bd$P136[bd$P136==9] <- NA
bd$P136  <- as.factor(bd$P136)
bd$P137[bd$P137==9] <- NA
bd$P137  <- as.factor(bd$P137)
bd$P138[bd$P138==9] <- NA
bd$P138  <- as.factor(bd$P138)
bd$P139[bd$P139==9] <- NA
bd$P139  <- as.factor(bd$P139)
bd$P140[bd$P140==9] <- NA
bd$P140  <- as.factor(bd$P140)
bd$P148  <- as.factor(bd$P148)
bd$P149  <- as.factor(bd$P149)
bd$P150  <- as.factor(bd$P150)
bd$P151  <- as.factor(bd$P151)
bd$P152  <- factor(bd$P152,labels = c("AS","CP","NP","PI","EM","ES","AC","RJ","SB","SN"))
bd$P153  <- as.factor(bd$P153)
bd$P154A <- as.factor(bd$P154A)
bd$P155  <- as.factor(bd$P155)
bd$P156A <- as.factor(bd$P156A)
bd$P156B <- as.factor(bd$P156B)
bd$P156C <- as.factor(bd$P156C)
bd$P156D <- as.factor(bd$P156D)
bd$P156E <- as.factor(bd$P156E)
bd$P156F <- as.factor(bd$P156F)
bd$P156G <- as.factor(bd$P156G)
bd$P156H <- as.factor(bd$P156H)
bd$P156I <- as.factor(bd$P156I)
bd$P156J <- as.factor(bd$P156J)
bd$P156K <- as.factor(bd$P156K)
bd$P157  <- as.factor(bd$P157)
bd$P158  <- as.factor(bd$P158)
bd$P159  <- as.factor(bd$P159)
bd$P160  <- as.factor(bd$P160)
bd$CodP160 <- as.factor(bd$CodP160)
bd$Nse <- as.factor(bd$Nse)
bd$P14[bd$P14==9]  <- NA
bd$P30[bd$P30==99] <- NA
bd$P34[bd$P34==99] <- NA
names(bd)
# Ampliación de los factores de expansion
expandido <- bd[rep(seq_len(nrow(bd)), bd$Ponderador5536),]
require(data.table)
# Importando librerias
library(readxl)
library(readr)
library(ggplot2)
library(Amelia)
library(VIM)
library(mice)
library(grid)
library(gridExtra)
require(data.table)
bd <- read_delim("bases de datos/base-5536-bdfinalcorregido.csv",
";", escape_double = FALSE, trim_ws = TRUE)
## definiendo algunas etiquetas comunes para los datos
inter_no <- c("Internauta", "No Internauta")
si_no <- c("SI","NO") # 1 = Si , 2 = No
# Clasificando datos categóricos y datos numéricos
bd$Tipo <- as.factor(bd$Tipo)
levels(bd$Tipo) <- inter_no
bd$P2   <- as.factor(bd$P2)
levels(bd$P2) <- si_no
bd$P4   <- as.factor(bd$P4)
levels(bd$P4)<- si_no
bd$P6   <- as.factor(bd$P6)
levels(bd$P6)<- si_no
bd$P10  <- as.factor(bd$P10)
bd$P12  <- as.factor(bd$P12)
bd$P15A <- as.factor(bd$P15A)
bd$P16  <- as.factor(bd$P16)
bd$P17  <- as.factor(bd$P17)
bd$P20  <- as.factor(bd$P20)
bd$P23  <- as.factor(bd$P23)
bd$P28  <- as.factor(bd$P28)
bd$P31A <- as.factor(bd$P31A)
bd$P32  <- as.factor(bd$P32)
bd$P33  <- as.factor(bd$P33)
bd$P35  <- as.factor(bd$P35)
bd$P36A[bd$P36A==9] <- NA
bd$P36A  <- as.factor(bd$P36A)
bd$P129A[bd$P129A==9] <- NA
bd$P129A <- as.factor(bd$P129A)
bd$P130A[bd$P130A==9] <- NA
bd$P130A <- as.factor(bd$P130A)
bd$P131A[bd$P131A==9] <- NA
bd$P131A <- as.factor(bd$P131A)
bd$P132A[bd$P132A==9] <- NA
bd$P132A <- as.factor(bd$P132A)
bd$P133A[bd$P133A==9] <- NA
bd$P133A <- as.factor(bd$P133A)
bd$P134[bd$P134==9] <- NA
bd$P134  <- as.factor(bd$P134)
bd$P135[bd$P135==9] <- NA
bd$P135  <- as.factor(bd$P135)
bd$P136[bd$P136==9] <- NA
bd$P136  <- as.factor(bd$P136)
bd$P137[bd$P137==9] <- NA
bd$P137  <- as.factor(bd$P137)
bd$P138[bd$P138==9] <- NA
bd$P138  <- as.factor(bd$P138)
bd$P139[bd$P139==9] <- NA
bd$P139  <- as.factor(bd$P139)
bd$P140[bd$P140==9] <- NA
bd$P140  <- as.factor(bd$P140)
bd$P148  <- as.factor(bd$P148)
bd$P149  <- as.factor(bd$P149)
bd$P150  <- as.factor(bd$P150)
bd$P151  <- as.factor(bd$P151)
bd$P152  <- factor(bd$P152,labels = c("AS","CP","NP","PI","EM","ES","AC","RJ","SB","SN"))
bd$P153  <- as.factor(bd$P153)
bd$P154A <- as.factor(bd$P154A)
bd$P155  <- as.factor(bd$P155)
bd$P156A <- as.factor(bd$P156A)
bd$P156B <- as.factor(bd$P156B)
bd$P156C <- as.factor(bd$P156C)
bd$P156D <- as.factor(bd$P156D)
bd$P156E <- as.factor(bd$P156E)
bd$P156F <- as.factor(bd$P156F)
bd$P156G <- as.factor(bd$P156G)
bd$P156H <- as.factor(bd$P156H)
bd$P156I <- as.factor(bd$P156I)
bd$P156J <- as.factor(bd$P156J)
bd$P156K <- as.factor(bd$P156K)
bd$P157  <- as.factor(bd$P157)
bd$P158  <- as.factor(bd$P158)
bd$P159  <- as.factor(bd$P159)
bd$P160  <- as.factor(bd$P160)
bd$CodP160 <- as.factor(bd$CodP160)
bd$Nse <- as.factor(bd$Nse)
bd$P14[bd$P14==9]  <- NA
bd$P30[bd$P30==99] <- NA
bd$P34[bd$P34==99] <- NA
names(bd)
# Ampliación de los factores de expansion
bd_dt <- as.data.table(bd)
expandido <- bd[rep(seq_len(nrow(bd_dt)), bd_dt$Ponderador5536),]
# Ampliación de los factores de expansion
bd_dt <- as.data.table(bd)
expandido <- bd_dt[rep(seq_len(nrow(bd_dt)), bd_dt$Ponderador5536),]
# Ampliación de los factores de expansion
bd_dt <- as.data.table(bd)
expandido <- bd_dt[rep(seq_len(nrow(bd_dt)), bd_dt$Ponderador5536),]
library(readr)
require(data.table)
setwd("/media/marco/165d5eb4-ca0f-4d82-a5d6-3052d1663348/TECHO/DatosCamp")
knitr::opts_chunk$set(echo = TRUE)
# Importando librerias
library(readxl)
library(readr)
library(ggplot2)
library(Amelia)
library(VIM)
library(mice)
library(grid)
library(gridExtra)
require(data.table)
bd <- read_delim("bases de datos/base-5536-bdfinalcorregido.csv",
";", escape_double = FALSE, trim_ws = TRUE)
## definiendo algunas etiquetas comunes para los datos
inter_no <- c("Internauta", "No Internauta")
si_no <- c("SI","NO") # 1 = Si , 2 = No
# Clasificando datos categóricos y datos numéricos
bd$Tipo <- as.factor(bd$Tipo)
levels(bd$Tipo) <- inter_no
bd$P2   <- as.factor(bd$P2)
levels(bd$P2) <- si_no
bd$P4   <- as.factor(bd$P4)
levels(bd$P4)<- si_no
bd$P6   <- as.factor(bd$P6)
levels(bd$P6)<- si_no
bd$P10  <- as.factor(bd$P10)
bd$P12  <- as.factor(bd$P12)
bd$P15A <- as.factor(bd$P15A)
bd$P16  <- as.factor(bd$P16)
bd$P17  <- as.factor(bd$P17)
bd$P20  <- as.factor(bd$P20)
bd$P23  <- as.factor(bd$P23)
bd$P28  <- as.factor(bd$P28)
bd$P31A <- as.factor(bd$P31A)
bd$P32  <- as.factor(bd$P32)
bd$P33  <- as.factor(bd$P33)
bd$P35  <- as.factor(bd$P35)
bd$P36A[bd$P36A==9] <- NA
bd$P36A  <- as.factor(bd$P36A)
bd$P129A[bd$P129A==9] <- NA
bd$P129A <- as.factor(bd$P129A)
bd$P130A[bd$P130A==9] <- NA
bd$P130A <- as.factor(bd$P130A)
bd$P131A[bd$P131A==9] <- NA
bd$P131A <- as.factor(bd$P131A)
bd$P132A[bd$P132A==9] <- NA
bd$P132A <- as.factor(bd$P132A)
bd$P133A[bd$P133A==9] <- NA
bd$P133A <- as.factor(bd$P133A)
bd$P134[bd$P134==9] <- NA
bd$P134  <- as.factor(bd$P134)
bd$P135[bd$P135==9] <- NA
bd$P135  <- as.factor(bd$P135)
bd$P136[bd$P136==9] <- NA
bd$P136  <- as.factor(bd$P136)
bd$P137[bd$P137==9] <- NA
bd$P137  <- as.factor(bd$P137)
bd$P138[bd$P138==9] <- NA
bd$P138  <- as.factor(bd$P138)
bd$P139[bd$P139==9] <- NA
bd$P139  <- as.factor(bd$P139)
bd$P140[bd$P140==9] <- NA
bd$P140  <- as.factor(bd$P140)
bd$P148  <- as.factor(bd$P148)
bd$P149  <- as.factor(bd$P149)
bd$P150  <- as.factor(bd$P150)
bd$P151  <- as.factor(bd$P151)
bd$P152  <- factor(bd$P152,labels = c("AS","CP","NP","PI","EM","ES","AC","RJ","SB","SN"))
bd$P153  <- as.factor(bd$P153)
bd$P154A <- as.factor(bd$P154A)
bd$P155  <- as.factor(bd$P155)
bd$P156A <- as.factor(bd$P156A)
bd$P156B <- as.factor(bd$P156B)
bd$P156C <- as.factor(bd$P156C)
bd$P156D <- as.factor(bd$P156D)
bd$P156E <- as.factor(bd$P156E)
bd$P156F <- as.factor(bd$P156F)
bd$P156G <- as.factor(bd$P156G)
bd$P156H <- as.factor(bd$P156H)
bd$P156I <- as.factor(bd$P156I)
bd$P156J <- as.factor(bd$P156J)
bd$P156K <- as.factor(bd$P156K)
bd$P157  <- as.factor(bd$P157)
bd$P158  <- as.factor(bd$P158)
bd$P159  <- as.factor(bd$P159)
bd$P160  <- as.factor(bd$P160)
bd$CodP160 <- as.factor(bd$CodP160)
bd$Nse <- as.factor(bd$Nse)
bd$P14[bd$P14==9]  <- NA
bd$P30[bd$P30==99] <- NA
bd$P34[bd$P34==99] <- NA
names(bd)
# Ampliación de los factores de expansion
bd_dt <- as.data.table(bd)
expandido <- bd_dt[rep(seq_len(nrow(bd_dt)), bd_dt$Ponderador5536),]
expandido <- bd_dt[rep(seq_len(bd_dt), bd_dt$Ponderador5536),]
expandido <- bd_dt[rep(bd_dt, bd_dt$Ponderador5536),]
expandido <- bd_dt[rep(bd_dt$id, bd_dt$Ponderador5536),]
expandido <- bd_dt[rep(bd_dt$NUMBOL, bd_dt$Ponderador5536),]
bd_dt <- as.data.table(bd)
rep.row<-function(x,n){
matrix(rep(x,each=n),nrow=n)
}
expandido <- rep.row(bd_dt[1,], bd_dt$Ponderador5033)]
expandido <- rep.row(bd_dt[1,], bd_dt$Ponderador5033)
library(readr)
require(data.table)
setwd("/home/mavino/Documents/TECHO")
personas <- read_delim("CSV/EH2017_Persona.csv",
";", escape_double = FALSE, trim_ws = TRUE)
setwd("/home/mavino/Documents/TECHO/TechoBol-CI-2018/")
personas <- read_delim("CSV/EH2017_Persona.csv",
";", escape_double = FALSE, trim_ws = TRUE)
vivienda <- read_delim("CSV/EH2017_Vivienda.csv",
";", escape_double = FALSE, trim_ws = TRUE)
names(personas)
personas <- as.data.table(personas)
## Quedandonos solamente con los jefes de hogar
personas <- personas[,c("folio","nro","area", "niv_ed" , "condact" , "s02a_02")]
personas <- as.data.table(personas)
personas <- personas[personas[, .I[nro == max(nro)], by=folio]$V1]
total <- merge(vivienda, personas, by = "folio")
library(readr)
require(data.table)
setwd("/home/mavino/Documents/TECHO/TechoBol-CI-2018/")
vivienda <- read_delim("CSV/EH2017_Vivienda.csv",
";", escape_double = FALSE, trim_ws = TRUE)
personas <- read_delim("CSV/EH2017_Persona.csv",
";", escape_double = FALSE, trim_ws = TRUE)
personas <- personas[,c("folio","nro","area", "niv_ed" , "condact" , "s02a_02")]
personas <- as.data.table(personas)
personas <- personas[personas[, .I[nro == max(nro)], by=folio]$V1]
vivienda <- merge(vivienda, personas, by = "folio")
table(vivienda$s01a_06)
table(vivienda$s01a_07)
# Puntajes para los muros
vivienda$punMuro <-0
table(vivienda$punMuro)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 1 ,1.5)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 2 & vivienda$s01a_07 == 2  ,0.5)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 2 & vivienda$s01a_07 == 1  ,1)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 3 & vivienda$s01a_07 == 2  ,0.5)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 3 & vivienda$s01a_07 == 1  ,1)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 4 ,0.5)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 5 ,1)
vivienda$punMuro = replace(vivienda$punMuro,vivienda$s01a_06 == 6 ,0.5)
# Puntaje para los techos
vivienda$punTecho <-0
vivienda$punTecho = replace(vivienda$punTecho, vivienda$s01a_08 == 1 , 1)
vivienda$punTecho = replace(vivienda$punTecho, vivienda$s01a_08 == 2 | vivienda$s01a_08 == 3  , 1.5)
vivienda$punTecho = replace(vivienda$punTecho, vivienda$s01a_08 == 4 , 0.5)
table(vivienda$punTecho)
# Puntaje para el piso
vivienda$punPiso <- 0
vivienda$punPiso = replace(vivienda$punPiso, vivienda$s01a_09 == 5 | vivienda$s01a_09 == 7, 1  )
vivienda$punPiso = replace(vivienda$punPiso, vivienda$s01a_09 == 2 | vivienda$s01a_09 == 3 | vivienda$s01a_09 == 4 | vivienda$s01a_09 == 6, 2  )
table(vivienda$punPiso)
vivienda$nbiPiso = 1 - vivienda$punPiso
vivienda$nbiTecho = 1 - vivienda$punTecho
vivienda$nbiMuro = 1 - vivienda$punMuro
vivienda$nbiVivienda = (vivienda$nbiMuro + vivienda$nbiPiso + vivienda$nbiTecho)/3
table(vivienda$nbiVivienda)
vivienda$nbiViviendaBinario = 0
vivienda$nbiViviendaBinario = replace(vivienda$nbiViviendaBinario, vivienda$nbiVivienda > 0, 1)
table(vivienda$nbiViviendaBinario)
# datos de vivienda
expandido <- vivienda[rep(seq_len(nrow(vivienda)), vivienda$factor),]
View(expandido)
table(expandido$nbiViviendaBinario)
library(readr)
require(data.table)
setwd("/home/mavino/Documents/TECHO/TechoBol-CI-2018/")
personas <- read_delim("CSV/EH2017_Persona.csv",
";", escape_double = FALSE, trim_ws = TRUE)
names(personas)
personas <- as.data.table(personas)
personas <- personas[,c("folio","nro","area", "niv_ed" , "condact" , "s02a_02" , "s02a_03", "s04a_05a","s04a_05b",
"s04a_05c","s04a_05d", "s04a_05e", "s04e_28a" ,      "s04e_28b",       "s04e_29a"  ,     "s04e_29b"    ,
"s04e_30a",       "s04e_30b" ,      "s04e_30c"  ,     "s04e_31a"  ,     "s04e_31b"   ,    "s04e_31c"  ,     "s04e_31d",
"s04e_31e",   "s04e_31f", "s05c_16aa"   ,   "s05c_16ab"    ,  "s05c_16e")]
personas <- as.data.table(personas)
expandido <- personas[rep(seq_len(nrow(vivienda)), personas$factor),]
personas <- personas[,c("folio", "factor","nro","area", "niv_ed" , "condact" , "s02a_02" , "s02a_03", "s04a_05a","s04a_05b",
"s04a_05c","s04a_05d", "s04a_05e", "s04e_28a" ,      "s04e_28b",       "s04e_29a"  ,     "s04e_29b"    ,
"s04e_30a",       "s04e_30b" ,      "s04e_30c"  ,     "s04e_31a"  ,     "s04e_31b"   ,    "s04e_31c"  ,     "s04e_31d",
"s04e_31e",   "s04e_31f", "s05c_16aa"   ,   "s05c_16ab"    ,  "s05c_16e")]
personas <- read_delim("CSV/EH2017_Persona.csv",
";", escape_double = FALSE, trim_ws = TRUE)
personas <- personas[,c("folio", "factor","nro","area", "niv_ed" , "condact" , "s02a_02" , "s02a_03", "s04a_05a","s04a_05b",
"s04a_05c","s04a_05d", "s04a_05e", "s04e_28a" ,      "s04e_28b",       "s04e_29a"  ,     "s04e_29b"    ,
"s04e_30a",       "s04e_30b" ,      "s04e_30c"  ,     "s04e_31a"  ,     "s04e_31b"   ,    "s04e_31c"  ,     "s04e_31d",
"s04e_31e",   "s04e_31f", "s05c_16aa"   ,   "s05c_16ab"    ,  "s05c_16e")]
personas <- as.data.table(personas)
expandido <- personas[rep(seq_len(nrow(vivienda)), personas$factor),]
expandido <- personas[rep(seq_len(nrow(personas)), personas$factor),]
table(expandido$nbiViviendaBinario)
table(personas$s02a_02)
table(personas$s02a_03)
table(expandido$s02a_03)
ggplot2(expandido$s02a_03)
ggplot2(expandido) + geom_areas(stat="bin")
library(ggplot2)
ggplot2(expandido) + geom_areas(stat="bin")
## distribución de edades
ggplot(data=expandido, aes(x=s02a_03 )) +
geom_bar(stat="s02a_02")
identity
## distribución de edades
ggplot(data=expandido, aes(x=s02a_03 )) +
geom_bar(stat="bins")
## distribución de edades
ggplot(data=expandido, aes(x=s02a_03 )) +
geom_bar(stat="bin")
